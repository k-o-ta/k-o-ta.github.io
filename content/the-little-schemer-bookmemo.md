+++
title = "Scheme手習い読書メモ"
date = 2020-10-01
draft = true
[taxonomies]
tags = ["books", "Scheme"]
+++

[Scheme手習い](https://www.ohmsha.co.jp/book/9784274068263/)を読んだ。社内にいるLisperと一緒に読み進めていったので、困ったときに訊いたりできて助かった。

## どんな本か
前書きにもあるが、非プログラマー向けの講座の内容をもとに執筆されていることも影響している。そのためか、全編を通して質問とそれに対する答えという形式で構成されており、一般的なプログラミング言語の入門書にあるような体系立てた文法の説明などはない。読者はひたすら質問に対して回答して(もしくは諦めて答えを見て)帰納的にSchemeを理解していく。

書籍の前半はひたすら `再帰` を手を動かしながら学んでいき、最後のほうで `継続`(8章)、`Yコンビネーター`(9章)が出てきて、最終章でSchemeインタープリター(10章)を開発して終わる。
問題を解きながら進めるので何らかの処理系をインストールしていることが望ましいが、自分は[Racket](https://racket-lang.org/)を使った。[DOWNLOAD](https://download.racket-lang.org/)のところからGUIの開発環境を簡単にインストールできて、repl機能、スクリプトファイルのロード、ステップ実行が簡単にできるからだ。(画像)

### chap08
P139(`multiremember&co`)で初めて継続が出てくるが、これがなかなかわかりにくい。引数の継続手続き(`col`)が`lambda`に包まれて次の再帰に渡されているので最終的に`col`が実行されるのは`(null? lat)`説がtrueになったとき、つまり再帰の最終地点で多重に`lamda`にくるまれた状態から実行される。各`lambda`内の`lat`はその`lamda`が生成され次回の再帰に渡されたときの`lat`をキャプチャしている。
[プログラミングGauche](https://www.oreilly.co.jp/books/9784873113487/)の19章のほうがループのたびに継続手続きが実行されるので直感的にわかりやすいと思う。

たとえば`(mutlirember&co 'a '(a b) col)`が実行されたとき、`col`が実行される瞬間は
`(col '() '())`
`((lamda (newlat seen)(col ((cons b) newlat))) '() '())`
`((lamda ('() '())(col ((cons b) '()))) '() '())`
`((lamda ('() '())((lambda (newlat seen)((col newlat) (cons 'a seen))) (cons b '()))) '() '())`
